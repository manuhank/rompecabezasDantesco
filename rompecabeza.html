<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Rompecabezas Dantesco</title>
</head>
<body id="body" style="background-color:#010101; color: #ffffff" onload="redimensionar(),  cambiarPelo(0); cambiarOjos(0); cambiarCuerpo(0); scriptPrecarga()" onresize="redimensionar()">


<!--logo Dantesco-->
<img style="position: absolute; top: 10px;left: 10px; z-index: 2; max-width:40%;" src="logo.png" id="logo">

<!--logo MPfoto-->


<!--rompecabezas-->
<div style="position: relative; margin:auto;max-width: 900px;" >

<!--boton al azar-->
<img style="position: absolute; top: 5%;right: 0px; max-width:100%;cursor:pointer;z-index: 1" src="azr.png" id="botonazar" onclick="azar()">

<div id="pelo" style="position: relative;" onmouseover="mostrar(flechasPelo)" onmouseout="ocultar(flechasPelo)">
<img style="display:block; margin:auto;cursor:pointer;" src="pelo/1.jpg" class="imagen" id="imgPelo" onclick="cambiarPelo(1)" >
<div id="flechasPelo" style="display: none;z-index: 1">
<img style="position: absolute; top: 50%;left: 20%; cursor:pointer" src="izq.png" onclick="cambiarPelo(-1)">
<img style="position: absolute; top: 50%;right: 20%; cursor:pointer" src="der.png" onclick="cambiarPelo(1)">
</div>
</div>

<div id="ojos" style="position: relative;" onmouseover="mostrar(flechasOjos)" onmouseout="ocultar(flechasOjos)">
<img style="display:block; margin:auto; cursor:pointer;" src="ojos/1.jpg" class="imagen" id="imgOjos" onclick="cambiarOjos(1)" >
<div id="flechasOjos" style="display: none; z-index: 1">
<img style="position: absolute; top: 50%;left: 20%; cursor:pointer" src="izq.png" onclick="cambiarOjos(-1)">
<img style="position: absolute; top: 50%;right: 20%; cursor:pointer" src="der.png" onclick="cambiarOjos(1)">
</div>
</div>

<div id="cuerpo" style="position: relative;" onmouseover="mostrar(flechasCuerpo)" onmouseout="ocultar(flechasCuerpo)">
<img style="display:block; margin:auto; cursor:pointer;" src="cuerpo/1.jpg" class="imagen" id="imgCuerpo" onclick="cambiarCuerpo(1)" >
<div id="flechasCuerpo" style="display: none; z-index: 1">
<img style="position: absolute; top: 50%;left: 10%; cursor:pointer" src="izq.png" onclick="cambiarCuerpo(-1)">
<img style="position: absolute; top: 50%;right: 10%; cursor:pointer" src="der.png" onclick="cambiarCuerpo(1)">
</div>
</div>

</div>

<!--pie de pagina-->
<div id="" style="position: fixed; left: 0px; bottom: 0;z-index: 2;width: 100%; background-color: rgba(01,01,01,0.4)">
<a href="https://www.facebook.com/manuelpuentesfotografia/">
<img style="position: absolute; bottom:0px; max-width:30%;left:10px;" src="logoB.png" id="MPFoto">
</a>
<!--Integracion redes sociales-->
<div style="display: flex; justify-content: center; align-items: center; float: right;margin: 10px;">
<p style="display: inline-block;font-family:arial;font-size: 20px;margin: 5px;">Compartí tu creación:</p>
<img style="display: inline-block;cursor: pointer; margin: 5px;max-width:10%" src="compartir/Facebook.png" onclick="window.open(crearURL('https://www.facebook.com/sharer/sharer.php?u='))" alt="" />
<img style="display: inline-block;cursor: pointer; margin: 5px;max-width:10%" src="compartir/Twitter.png" onclick="window.open(crearURL('https://twitter.com/intent/tweet?ref_src=twsrc%5Etfw&text=%C2%A1Est%C3%A1%20vivo!&tw_p=tweetbutton&url='))" alt="" />
<img style="display: inline-block;cursor: pointer; margin: 5px;max-width:10%" src="compartir/Whatsapp.png" onclick="window.open(crearURL('whatsapp://send?text='))" alt="" />
</div>
</div>
<!--precarga-->
<img style=" display: none;"src="" id="precargaImg" />

<script language="javascript">
//Numero de caras incluidas
var caras = 7
//estas variables cargan sus valores de la URL, si esta disponible.
var pelo = cargaURL("pelo", 1)
var ojos = cargaURL("ojos", 1)
var	cuerpo = cargaURL("cuerpo", 1)


function scriptPrecarga() {
	for (var i = 1; i <= caras; i++) {
		document.getElementById("precargaImg").src = "pelo/" + i.toString() + ".jpg";
		document.getElementById("precargaImg").src = "ojos/" + i.toString() + ".jpg";
		document.getElementById("precargaImg").src = "cuerpo/" + i.toString() + ".jpg";
	};
};
// Esta funcion se fija si hay variables en la URL, y llama a obtenerValor pararecuperar valores no nulos
function cargaURL(x, esNum){
	if (window.location.search.substring(1)){
		if (obtenerValor(x, esNum)){
			return obtenerValor(x, esNum);
		} else {
   			return 1;
   		};
	} else {
   		return 1;
   };
};
// Divide la url en variables y las devuelve como numero o string
function obtenerValor(variable,esNum){
   var url = window.location.search.substring(1);
   var vars = url.split("&");
   for (var i=0;i<vars.length;i++) {
           var par = vars[i].split("=");
           if(par[0] == variable){
				if(esNum){
				return parseInt(par[1]);
				} else {
					return par[1]
				};
			};
	};
   };
       
   function redimensionar() {
// Toma la proporcion del viewport sobre el contenido fotografico.
   var h = (document.documentElement.clientHeight)/755
//Si el viewport es menor al contenido
   if (h<1){
//achicamos la proporcion para que no haga scrolling al quedar en el limite
   h -= 0.022
//Y le damos esa proporcion al alto de cada imagen
   imgPelo.style.height = Math.floor(h*303).toString() + "px"
   imgOjos.style.height = Math.floor(h*182).toString() + "px"
   imgCuerpo.style.height = Math.floor(h*272).toString() + "px"
   };
   };

//muestra y oculta las flechas   
   function mostrar(x) {
   x.style.display = 'block';
   };
   
   function ocultar(x) {
   x.style.display = 'none'
   };

//funcion para cambiar la imagen. -1 significa atras 1 adelante.   
   function cambiarPelo(x) {
	pelo += x
	if (pelo > caras) {
		pelo = 1
	} else if (pelo < 1){
		pelo = caras
	};
    document.getElementById("imgPelo").src = "pelo/" + pelo.toString() + ".jpg";    
   };
   
   function cambiarOjos(x) {
	ojos += x;
	if (ojos > caras) {
		ojos = 1
	} else if (ojos < 1){
		ojos = caras
	};
    document.getElementById("imgOjos").src = "ojos/" + ojos.toString() + ".jpg";    
   };
   
   function cambiarCuerpo(x) {
	cuerpo += x;
	if (cuerpo > caras) {
		cuerpo = 1
	} else if (cuerpo < 1){
		cuerpo = caras
	};
    document.getElementById("imgCuerpo").src = "cuerpo/" + cuerpo.toString() + ".jpg";    
   };
//genera un numero natural al azar entre 1 y la cantidad de caras.   
   function azar() {
   pelo = Math.round(Math.random() * (caras - 1)) + 1;
   ojos = Math.round(Math.random() * (caras - 1)) + 1;
   cuerpo = Math.round(Math.random() * (caras - 1)) + 1;
   cambiarPelo(0);
   cambiarOjos(0);
   cambiarCuerpo(0);
   };
   
function crearURL(x) {
return x + window.location.href.split('?')[0] + "%3Fpelo%3D3" + pelo.toString() + "%26ojos%3D4" + ojos.toString() + "%26cuerpo%3D5" + cuerpo.toString();

};
</script>

</body>
</html>
